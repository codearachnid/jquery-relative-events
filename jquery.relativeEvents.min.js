!function(a){function g(b,c){this.element=b,this.settings=a.extend({},f,c),this._defaults=f,this._name=e,this._debug=this.settings.debug,this.eventData=[],this.init()}var e="relativeEvents",f={debug:!1,eventOffset:{top:0,left:0,width:0,height:0},sortEvents:!1,setStartOfDay:!0,dayStart:8,dayStartOffset:0};g.prototype={init:function(){this._debug&&(console.time(this._name+"-init"),console.log(this._name+".init()")),this.setEventData()&&this.setEventPositions(),this.settings.setStartOfDay&&this.setStartOfDay(),this._debug&&console.timeEnd(this._name+"-init")},setEventData:function(){this._debug&&(console.time(this._name+"-setEventData"),console.log(this._name+".setEventData()"));var b=this;return a(this.element).find(".day").each(function(c,d){if("undefined"==typeof a(d).id){var e=b.getUUID();a(d).attr("id",e)}else var e=a(d).id;0==c&&a(d).addClass("first");var f=a(d).find(".event");"undefined"==typeof b.eventData[e]&&(b.eventData[e]={item:[],map:[],group:[]}),f.each(function(c,d){d=a(d),"undefined"==typeof d.attr("id")?(itemID="event-"+c,d.attr("id",itemID)):itemID=d.attr("id");var f=60*parseInt(d.attr("data-hour"))+parseInt(d.attr("data-minute")),g=f+parseInt(d.attr("data-duration"));b.eventData[e].item[itemID]={start:f,end:g,day:e,column:0},b.insertEventToMap(itemID,f,g,e,!1),b.insertEventToGroup(itemID,f,g,e,!1)}),c==a(b.element).find(".day").length-1&&b._debug&&console.timeEnd(b._name+"-setEventData")}),!0},setEventPositions:function(){this._debug&&(console.time(this._name+"-setEventPositions"),console.log(this._name+".setEventPositions()"));var b=this;for(var c in this.eventData){columnWidth=a(this.element).find("#"+c).width();for(var d=0;d<this.eventData[c].group.length;d++){itemWidth=parseInt(columnWidth)/parseInt(this.eventData[c].group[d].maxWidth)+parseInt(this.settings.eventOffset.width),console.log(columnWidth+"/"+this.eventData[c].group[d].maxWidth+"+"+this.settings.eventOffset.width);for(var e=0;e<this.eventData[c].group[d].id.length;e++)item=this.eventData[c].item[this.eventData[c].group[d].id[e]],itemHeight=parseInt(item.end)-parseInt(item.start)+parseInt(this.settings.eventOffset.height),itemOffset={},itemOffset.top=item.start+parseInt(this.settings.eventOffset.top),parseInt(this.eventData[c].group[d].maxWidth)>1&&item.column>1&&(itemOffset.left=itemWidth*(item.column-1)+parseInt(this.settings.eventOffset.left)*(item.column-1)),a("#"+this.eventData[c].group[d].id[e],a("#"+c)).width(itemWidth).height(itemHeight).css(itemOffset),b._debug&&console.log(this._name+".setEventPosition: column: #"+c+" item: #"+this.eventData[c].group[d].id[e]+" width:"+itemWidth+"px height:"+itemHeight+"px offset-x:"+a("#"+this.eventData[c].group[d].id[e]).offset().left+" offset-y:"+a("#"+this.eventData[c].group[d].id[e]).offset().top)}}this._debug&&console.timeEnd(this._name+"-setEventPositions")},insertEventToGroup:function(a,b,c,d,e){if(this._debug&&(console.time(this._name+"-insertEventToGroup"),console.log(this._name+".insertEventToGroup("+a+","+b+","+c+","+d+","+e+")")),0==this.eventData[d].group.length||this.eventData[d].group.length<=e)this.eventData[d].group[this.eventData[d].group.length]={id:[a],range:{start:b,end:c},maxWidth:1},e=this.eventData[d].group.length-1,this._debug&&console.timeEnd(this._name+"-insertEventToGroup");else if(e!==!1)this.eventData[d].group[e].id.push(a),this.eventData[d].group[e].range.end<c&&(this.eventData[d].group[e].range.end=c),this.eventData[d].group[e].maxWidth<this.eventData[d].item[itemID].column&&(this.eventData[d].group[e].maxWidth=this.eventData[d].item[itemID].column);else{e=this.eventData[d].group.length;for(var f=0;f<this.eventData[d].group.length;f++)if(this.eventData[d].group[f].range.start<=b&&this.eventData[d].group[f].range.end>b){e=f;break}this._debug&&console.timeEnd(this._name+"-insertEventToGroup"),this.insertEventToGroup(a,b,c,d,e)}},insertEventToMap:function(a,b,c,d,e){if(this._debug&&(console.time(this._name+"-insertEventToMap"),console.log(this._name+".insertEventToMap("+a+","+b+","+c+","+d+","+e+")")),(0==this.eventData[d].map.length||this.eventData[d].map.length<=e)&&(this.eventData[d].map.push(this.arrayFill(0,1440,"")),e=this.eventData[d].map.length-1),e!==!1){for(var f=b;c>f;f++)this.eventData[d].map[e][f]=a;this.eventData[d].item[itemID].column=e+1,this._debug&&console.timeEnd(this._name+"-insertEventToMap")}else{for(var g=!0,f=0;f<this.eventData[d].map.length;f++){g=!0;for(var h=b;c>h;h++)if(""!=this.eventData[d].map[f][h]){g=!1;break}if(g){e=f;break}g||f!=this.eventData[d].map.length-1||(e=this.eventData[d].map.length)}this._debug&&console.timeEnd(this._name+"-insertEventToMap"),this.insertEventToMap(a,b,c,d,e)}},setStartOfDay:function(){this._debug&&(console.time(this._name+"-setStartOfDay"),console.log(this._name+".setStartOfDay()"));var b=a(this.element),c=b.find(".grid li[data-hour="+parseInt(this.settings.dayStart)+"]");return 0==c.length?(console.log(this._name+".setStartOfDay() error: day start could not be found in dom"),this._debug&&console.timeEnd(this._name+"-setStartOfDay"),!1):(b.scrollTop(c.position().top-b.scrollTop()+parseInt(this.settings.dayStartOffset)),this._debug&&console.timeEnd(this._name+"-setStartOfDay"),void 0)},arrayFill:function(a,b,c){this._debug&&(console.time(this._name+"-arrayFill"),console.log(this._name+".arrayFill("+a+","+b+","+c+")"));var d={};if(!isNaN(a)&&!isNaN(b))for(var e=0;b>e;e++)d[e+a]=c;return this._debug&&console.timeEnd(this._name+"-arrayFill"),d},getUUID:function(){this._debug&&(console.time(this._name+"-getUUID"),console.log(this._name+".getUUID()"));for(var a=[],b="0123456789abcdef",c=0;36>c;c++)a[c]=b.substr(Math.floor(16*Math.random()),1);a[14]="4",a[19]=b.substr(8|3&a[19],1),a[8]=a[13]=a[18]=a[23]="-";var d=a.join("");return this._debug&&console.timeEnd(this._name+"-getUUID"),d}},a.fn[e]=function(b){return this.each(function(){a.data(this,"plugin_"+e)||a.data(this,"plugin_"+e,new g(this,b))})}}(jQuery,window,document);
/**
 * jQuery Relative Events
 * @link https://github.com/codearachnid/jquery-relative-events/
 */
